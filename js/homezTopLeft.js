"use strict";var hoverOnCommentBarrage;function RemoveRewardMask(){$(".reward-main").attr("style","display: none"),$("#quit-box").attr("style","display: none")}function AddRewardMask(){$(".reward-main").attr("style","display: flex")}function percent(){var e=document.documentElement.scrollTop||window.pageYOffset,t=Math.max(document.body.scrollHeight,document.documentElement.scrollHeight,document.body.offsetHeight,document.documentElement.offsetHeight,document.body.clientHeight,document.documentElement.clientHeight)-document.documentElement.clientHeight,o=Math.round(e/t*100),n=document.querySelector("#percent"),d=window.scrollY+document.documentElement.clientHeight,l=document.getElementById("post-tools")||document.getElementById("footer");l.offsetTop+l.offsetHeight/2<d||90<o?(document.querySelector("#nav-totop").classList.add("long"),n.innerHTML="返回顶部"):(document.querySelector("#nav-totop").classList.remove("long"),n.innerHTML=o)}function hideTodayCard(){document.getElementById("todayCard").classList.add("hide")}function initThemeColor(){let e=document.documentElement.scrollTop||window.pageYOffset,t=Math.max(document.body.scrollHeight,document.documentElement.scrollHeight,document.body.offsetHeight,document.documentElement.offsetHeight,document.body.clientHeight,document.documentElement.clientHeight)-document.documentElement.clientHeight,o=Math.round(e/t*100);100==o?(document.getElementById("nav-totop").classList.add("long"),document.getElementById("percent").innerHTML="返回顶部"):(document.getElementById("nav-totop").classList.remove("long"),document.getElementById("percent").innerHTML=o)}function showConsole(){document.querySelector("#console").classList.add("show"),window.screen.width<768&&(document.querySelector("html").classList.add("overflhid"),document.querySelector("body").classList.add("overflhid")),domscrooll()}function hideConsole(){document.querySelector("#console").classList.remove("show"),window.screen.width<768&&(document.querySelector("html").classList.remove("overflhid"),document.querySelector("body").classList.remove("overflhid")),domscrooll()}document.addEventListener("touchstart",(function(e){RemoveRewardMask()}),!1),$(document),document.addEventListener("scroll",btf.throttle((function(){}),200)),navigator.serviceWorker.getRegistrations(),$(".top_post_group").hover((function(){}),(function(){hoverOnCommentBarrage=!1,document.getElementById("todayCard").classList.remove("hide"),document.getElementById("todayCard").style.zIndex=1})),window.onscroll=initThemeColor;var keys={37:1,38:1,39:1,40:1};function preventDefault(e){e.preventDefault()}function preventDefaultForScrollKeys(e){if(keys[e.keyCode])return preventDefault(e),!1}var supportsPassive=!1;try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:function(){supportsPassive=!0}}))}catch(e){}var wheelOpt=!!supportsPassive&&{passive:!1},wheelEvent="onwheel"in document.createElement("div")?"wheel":"mousewheel";function domscrooll(){"show"==document.querySelector("#console").className?window.screen.width>768&&(window.addEventListener("DOMMouseScroll",preventDefault,!1),window.addEventListener(wheelEvent,preventDefault,wheelOpt),window.addEventListener("touchmove",preventDefault,wheelOpt),window.addEventListener("keydown",preventDefaultForScrollKeys,!1)):(window.removeEventListener("DOMMouseScroll",preventDefault,!1),window.removeEventListener(wheelEvent,preventDefault,wheelOpt),window.removeEventListener("touchmove",preventDefault,wheelOpt),window.removeEventListener("keydown",preventDefaultForScrollKeys,!1))}